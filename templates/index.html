<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Horoscope WebApp</title>
    <script>
    async function submitForm() {
    const astrologySign = document.getElementById('astrology_sign').value;
    const yearOfBirth = document.getElementById('year_of_birth').value;
    const horoscopeDisplay = document.getElementById('horoscope_display');
    const loading = document.getElementById('loading');

    // Hide any existing horoscope and show the loading message
    if (horoscopeDisplay.children.length > 0) {
        horoscopeDisplay.children[0].style.display = 'none';
    }
    loading.style.display = 'block';

    const response = await fetch('/get_horoscope', {
        method: 'POST',
        body: new FormData(document.querySelector('form'))
    });

    const data = await response.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(data, 'text/html');
    const horoscope = doc.querySelector('#horoscope_display').innerHTML;

    // Update the horoscope and hide the loading message
    horoscopeDisplay.innerHTML = horoscope;
    loading.style.display = 'none';
}



</script>
</head>
<body>
    <h1>Daily Horoscope</h1>
    <form onsubmit="event.preventDefault(); submitForm();">
        <label for="astrology_sign">Astrology Sign:</label>
<select id="astrology_sign" name="astrology_sign">
    <option value="Aries">Aries</option>
    <option value="Taurus">Taurus</option>
    <option value="Gemini">Gemini</option>
    <option value="Cancer">Cancer</option>
    <option value="Leo">Leo</option>
    <option value="Virgo">Virgo</option>
    <option value="Libra">Libra</option>
    <option value="Scorpio">Scorpio</option>
    <option value="Sagittarius">Sagittarius</option>
    <option value="Capricorn">Capricorn</option>
    <option value="Aquarius">Aquarius</option>
    <option value="Pisces">Pisces</option>
</select><br>

        <label for="year_of_birth">Year of Birth:</label>
<select id="year_of_birth" name="year_of_birth">
    {% for year in range(current_year - 90, current_year + 1) %}
        <option value="{{ year }}">{{ year }}</option>
    {% endfor %}
</select><br>
        <label for="area">Horoscope Area</label>
        <select id="area" name="area">
            <option value="Love">Love</option>
            <option value="Career">Career</option>
            <option value="Health">Health</option>
            <option value="Mood">Mood</option>
        </select><br>

        <button type="submit">Get Horoscope</button>
    </form>
   <div id="horoscope_display">
    {% if horoscope %}
        <p>{{ horoscope }}</p>
    {% endif %}
</div>
<p id="loading" style="display:none;">Reading the stars...</p>






</body>
</html>
